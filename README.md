# Оценка времени отклика сервера в режиме симулирования запросов (wrk + async-profiler)

### Сведения о системе
| | |
|-|-|
| ОС Ubuntu | 18.04 LTS x64-bit |
| Процессор | Intel(R) Celeron(R) N4000 CPU @ 1.10GHz |
| Объём RAM | 8 ГБ |
| Количество ядер ЦПУ | 2 |


В ходе мониторинга производительности сервера (хост по адресу http://127.0.0.1:8080) с использованием инструмента <strong><em>wrk</em></strong> получены результирующие задержки обработки следующих запросов:
1) curl http://127.0.0.1:8080/v0/status    
2) GET /v0/entity?id=<ID>   
3) PUT /v0/entity?id=<ID>  
4) DELETE /v0/entity?id=<ID>

Основные параметры создания и передачи запросов через wrk (идентичны для всех исследуемых операций) 

``` wrk -t1 -c1 -d3m -R2000 http://127.0.0.1:8080 ```

Сводки наблюдений по каждой из указанных операций приведены далее.<br/>  
### 1) curl http://127.0.0.1:8080/v0/status <br/>

Консольный вывод:
```
max@max-Inspiron-15-3573:~/asynctool/async-profiler-1.8.1-linux-x64$ wrk -t1 -c1 -d3m -R2000 --latency http://localhost:8080
Running 3m test @ http://localhost:8080
  1 threads and 1 connections
  Thread calibration: mean lat.: 1.319ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.40ms    1.59ms  39.62ms   93.96%
    Req/Sec     2.12k   482.56     8.00k    88.36%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.09ms
 75.000%    1.57ms
 90.000%    2.03ms
 99.000%    9.04ms
 99.900%   15.57ms
 99.990%   29.69ms
 99.999%   38.43ms
100.000%   39.65ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.049     0.000000            5         1.00
       0.365     0.100000        34105         1.11
       0.610     0.200000        68121         1.25
       0.818     0.300000       102018         1.43
       0.962     0.400000       136025         1.67
       1.090     0.500000       170135         2.00
       1.154     0.550000       187087         2.22
       1.237     0.600000       204018         2.50
       1.344     0.650000       221095         2.86
       1.454     0.700000       238034         3.33
       1.568     0.750000       255076         4.00
       1.623     0.775000       263579         4.44
       1.680     0.800000       272062         5.00
       1.745     0.825000       280577         5.71
       1.812     0.850000       288968         6.67
       1.899     0.875000       297525         8.00
       1.952     0.887500       301761         8.89
       2.027     0.900000       306003        10.00
       2.163     0.912500       310249        11.43
       2.369     0.925000       314467        13.33
       2.869     0.937500       318717        16.00
       3.245     0.943750       320843        17.78
       3.669     0.950000       322965        20.00
       4.143     0.956250       325100        22.86
       4.671     0.962500       327213        26.67
       5.319     0.968750       329340        32.00
       5.683     0.971875       330410        35.56
       6.079     0.975000       331463        40.00
       6.527     0.978125       332535        45.71
       7.023     0.981250       333592        53.33
       7.599     0.984375       334658        64.00
       7.927     0.985938       335180        71.11
       8.319     0.987500       335714        80.00
       8.759     0.989062       336252        91.43
       9.231     0.990625       336776       106.67
       9.783     0.992188       337308       128.00
      10.071     0.992969       337570       142.22
      10.399     0.993750       337842       160.00
      10.759     0.994531       338106       182.86
      11.175     0.995313       338370       213.33
      11.623     0.996094       338636       256.00
      11.903     0.996484       338768       284.44
      12.215     0.996875       338900       320.00
      12.543     0.997266       339032       365.71
      12.959     0.997656       339164       426.67
      13.471     0.998047       339297       512.00
      13.791     0.998242       339364       568.89
      14.119     0.998437       339429       640.00
      14.511     0.998633       339496       731.43
      15.031     0.998828       339562       853.33
      15.663     0.999023       339629      1024.00
      16.055     0.999121       339663      1137.78
      16.495     0.999219       339697      1280.00
      16.975     0.999316       339728      1462.86
      17.711     0.999414       339761      1706.67
      18.607     0.999512       339795      2048.00
      19.071     0.999561       339812      2275.56
      19.679     0.999609       339828      2560.00
      20.175     0.999658       339844      2925.71
      21.055     0.999707       339861      3413.33
      22.207     0.999756       339879      4096.00
      23.295     0.999780       339886      4551.11
      24.431     0.999805       339894      5120.00
      25.743     0.999829       339903      5851.43
      26.895     0.999854       339911      6826.67
      28.399     0.999878       339919      8192.00
      29.263     0.999890       339923      9102.22
      29.935     0.999902       339927     10240.00
      30.783     0.999915       339931     11702.86
      31.727     0.999927       339936     13653.33
      32.175     0.999939       339940     16384.00
      32.447     0.999945       339942     18204.44
      32.623     0.999951       339944     20480.00
      33.503     0.999957       339946     23405.71
      34.399     0.999963       339948     27306.67
      35.295     0.999969       339950     32768.00
      35.743     0.999973       339951     36408.89
      36.191     0.999976       339952     40960.00
      36.639     0.999979       339953     46811.43
      37.087     0.999982       339954     54613.33
      37.535     0.999985       339955     65536.00
      37.983     0.999986       339956     72817.78
      37.983     0.999988       339956     81920.00
      38.431     0.999989       339957     93622.86
      38.431     0.999991       339957    109226.67
      38.879     0.999992       339958    131072.00
      38.879     0.999993       339958    145635.56
      38.879     0.999994       339958    163840.00
      39.327     0.999995       339959    187245.71
      39.327     0.999995       339959    218453.33
      39.327     0.999996       339959    262144.00
      39.327     0.999997       339959    291271.11
      39.327     0.999997       339959    327680.00
      39.647     0.999997       339960    374491.43
      39.647     1.000000       339960          inf
#[Mean    =        1.402, StdDeviation   =        1.585]
#[Max     =       39.616, Total count    =       339960]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  359967 requests in 3.00m, 24.37MB read
  Non-2xx or 3xx responses: 359967
Requests/sec:   1999.82
Transfer/sec:    138.66KB

```

Приведённая статистика свидетельствует о достижении серверной нагрузки на уровне 2000 запросов в секунду. Средняя длительность задержек в процессе обработки запроса и возврата данных клиенту установлена равной 1.4 ms при отклонении, достигающем 93%. Оценка времени ожидания ответа на основе квантильного распределения результатов позволяет утверждать, что в 99,99% случаев длительность поступления данных с локального сервера не превышала 30 мс. При этом оставшаяся доля операций (0.01%) приходится на запросы, формирование ответа на которые отмечено ощутимо большей задержкой, что находит отражение в оценке длительности обработки и отправки результата запроса в пределах 39 мс.  <br/>                    

![Screenshot from 2020-09-27 00-34-23](https://user-images.githubusercontent.com/55311053/94411885-c86e1a80-0181-11eb-8c58-06519574e2ce.png)
<p align="center">Рис.1. Визуализация эффектов нагрузки на ресурсы ЦПУ и RAM в интерфейсе VisualVM</p>

Данный рисунок иллюстрирует динамику использования ресурсов ЦПУ и RAM в ходе обработки запросов, поступающих в режиме симуляции нагрузки. Как следует из приведённых графиков, запуск wrk споровождался резким повышением амплитуды кривой, описывающей интенсивность операций на каждом из вышеназванных устройств. Реализация клиент-серверного взаимодействия на основе единственного соединения проявляется в регулярности всплесков и падений активности, связанной с выделением динамической памяти для обработки подаваемых на входной порт сервера запросов. Для графика флуктуаций захвата ЦПУ характерны локальные отклонения от медианного значения, близкого к 10% от агрегированного числа квантов процессорного времени.  <br/>        

Итоги профилирования вычислительных процессов на базе сервера ```(./profile.sh -d 60 -e cpu -f  /tmp/flameoutput_cpu.svg <server_runner_pid>)``` в виде экземпляра <em>flamegraph:</em><br/>

![kindle1](https://user-images.githubusercontent.com/55311053/94413196-6ca49100-0183-11eb-9ab5-9a9bd68f951f.jpg)
<p align="center">Рис.1. Flamegraph выделения ресурса ЦПУ</p>


Анализируя полученный профиль, можно констатировать, что основными факторами, обеспечившими нагрузку на ЦПУ, оказались операции с буфером данных и сокетом на рабочем порту сервера. На поддержание функций селектора было затрачено около 88% процессорного времени, выделенного на осуществление операций локального сервера.<br/>           
  
Итоги профилирования процессов аллокации ```(/profile.sh -d 60 -e alloc -f  /tmp/flameoutput_allocation.svg <server_runner_pid>)```

![image-1](https://user-images.githubusercontent.com/55311053/94415005-aaa2b480-0185-11eb-87dc-8482d9500fec.jpg)
<p align="center">Рис.1. Flamegraph выделения RAM</p>

Визуализация использования RAM подтверждает превалирующий характер операций с буфером среди факторов, определяющих актуальную нагрузку на сервер.   

### 2) GET /v0/entity?id=<ID> <br/>

Консольный вывод wrk:<br/>
```
max@max-Inspiron-15-3573:~/overload/2020-highload-dht$ wrk -t1 -c1 -d3m -s src/profiling/wrk_scripts/get.lua -R2000 --latency http://localhost:8080
Running 3m test @ http://localhost:8080
  1 threads and 1 connections
  Thread calibration: mean lat.: 2.156ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.70ms    2.49ms  40.45ms   93.48%
    Req/Sec     2.13k   566.51     8.11k    87.92%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.14ms
 75.000%    1.66ms
 90.000%    2.44ms
 99.000%   14.11ms
 99.900%   25.55ms
 99.990%   34.11ms
 99.999%   39.74ms
100.000%   40.48ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.071     0.000000            1         1.00
       0.399     0.100000        34014         1.11
       0.651     0.200000        68098         1.25
       0.856     0.300000       102091         1.43
       1.009     0.400000       136161         1.67
       1.141     0.500000       170020         2.00
       1.212     0.550000       186994         2.22
       1.301     0.600000       203996         2.50
       1.417     0.650000       221033         2.86
       1.540     0.700000       238116         3.33
       1.660     0.750000       255024         4.00
       1.725     0.775000       263595         4.44
       1.788     0.800000       272047         5.00
       1.854     0.825000       280561         5.71
       1.943     0.850000       289040         6.67
       2.087     0.875000       297531         8.00
       2.231     0.887500       301766         8.89
       2.437     0.900000       306017        10.00
       2.815     0.912500       310248        11.43
       3.509     0.925000       314497        13.33
       4.403     0.937500       318744        16.00
       4.935     0.943750       320881        17.78
       5.519     0.950000       322998        20.00
       6.187     0.956250       325118        22.86
       6.931     0.962500       327242        26.67
       7.811     0.968750       329364        32.00
       8.367     0.971875       330430        35.56
       8.991     0.975000       331491        40.00
       9.687     0.978125       332552        45.71
      10.527     0.981250       333621        53.33
      11.487     0.984375       334676        64.00
      12.063     0.985938       335209        71.11
      12.735     0.987500       335739        80.00
      13.551     0.989062       336277        91.43
      14.527     0.990625       336804       106.67
      15.663     0.992188       337332       128.00
      16.271     0.992969       337602       142.22
      16.927     0.993750       337864       160.00
      17.631     0.994531       338137       182.86
      18.367     0.995313       338397       213.33
      19.247     0.996094       338662       256.00
      19.823     0.996484       338794       284.44
      20.399     0.996875       338928       320.00
      21.055     0.997266       339059       365.71
      21.743     0.997656       339197       426.67
      22.623     0.998047       339324       512.00
      23.151     0.998242       339391       568.89
      23.695     0.998437       339458       640.00
      24.255     0.998633       339524       731.43
      24.927     0.998828       339591       853.33
      25.663     0.999023       339657      1024.00
      25.999     0.999121       339691      1137.78
      26.367     0.999219       339724      1280.00
      26.783     0.999316       339757      1462.86
      27.327     0.999414       339789      1706.67
      27.855     0.999512       339822      2048.00
      28.271     0.999561       339839      2275.56
      28.735     0.999609       339857      2560.00
      29.327     0.999658       339872      2925.71
      29.887     0.999707       339889      3413.33
      30.511     0.999756       339905      4096.00
      30.927     0.999780       339914      4551.11
      31.343     0.999805       339922      5120.00
      31.935     0.999829       339930      5851.43
      32.799     0.999854       339940      6826.67
      33.599     0.999878       339948      8192.00
      33.727     0.999890       339951      9102.22
      34.143     0.999902       339955     10240.00
      34.751     0.999915       339959     11702.86
      35.679     0.999927       339964     13653.33
      36.511     0.999939       339968     16384.00
      36.895     0.999945       339970     18204.44
      37.311     0.999951       339972     20480.00
      37.695     0.999957       339974     23405.71
      38.399     0.999963       339976     27306.67
      38.815     0.999969       339978     32768.00
      38.911     0.999973       339979     36408.89
      39.231     0.999976       339980     40960.00
      39.327     0.999979       339982     46811.43
      39.327     0.999982       339982     54613.33
      39.647     0.999985       339983     65536.00
      39.743     0.999986       339985     72817.78
      39.743     0.999988       339985     81920.00
      39.743     0.999989       339985     93622.86
      39.743     0.999991       339985    109226.67
      40.031     0.999992       339986    131072.00
      40.031     0.999993       339986    145635.56
      40.031     0.999994       339986    163840.00
      40.063     0.999995       339987    187245.71
      40.063     0.999995       339987    218453.33
      40.063     0.999996       339987    262144.00
      40.063     0.999997       339987    291271.11
      40.063     0.999997       339987    327680.00
      40.479     0.999997       339988    374491.43
      40.479     1.000000       339988          inf
#[Mean    =        1.702, StdDeviation   =        2.485]
#[Max     =       40.448, Total count    =       339988]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  359998 requests in 3.00m, 49.09MB read
  Non-2xx or 3xx responses: 359998
Requests/sec:   1999.98
Transfer/sec:    279.29KB
```

Результаты симулирования нагрузки в режиме генерации GET-запросов указывают на достижение более высоких задержек, чем при передаче проверочного запроса, рассмотренного на первом этапе текущего анализа. Средняя длительность задержки возросла на 0.3 мс при наблюдении идентичного отклонения (приблизительно 93%). Ожидание ответа сервера в 99,99% случаев длилось не более 34,5 мс, в 99,999% - не более 40 мс. Расширение интервалов отклика до указанных значений обусловлено спецификой имплементации запросов на получение данных из хранилища: при установлении наличия в нём целевого ключа сервер затрачивает дополнительное время на формирование ответа, содержащего соответствующее аргументу функции значение. <br/>

### 3) PUT /v0/entity?id=<ID><br/>

Консольный вывод wrk<br/>
```
max@max-Inspiron-15-3573:~/overload/2020-highload-dht$ wrk -t1 -c1 -d3m -s src/profiling/wrk_scripts/put.lua -R2000 --latency http://localhost:8080
Running 3m test @ http://localhost:8080
  1 threads and 1 connections
  Thread calibration: mean lat.: 1.821ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     2.01ms    2.83ms  50.14ms   91.08%
    Req/Sec     2.14k   655.38    11.00k    83.39%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.21ms
 75.000%    1.83ms
 90.000%    4.30ms
 99.000%   14.19ms
 99.900%   27.71ms
 99.990%   42.94ms
 99.999%   49.28ms
100.000%   50.17ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.082     0.000000            1         1.00
       0.437     0.100000        34072         1.11
       0.694     0.200000        68033         1.25
       0.904     0.300000       102144         1.43
       1.061     0.400000       136097         1.67
       1.213     0.500000       170054         2.00
       1.304     0.550000       187122         2.22
       1.423     0.600000       204086         2.50
       1.550     0.650000       221061         2.86
       1.692     0.700000       238060         3.33
       1.833     0.750000       255065         4.00
       1.914     0.775000       263509         4.44
       2.025     0.800000       272042         5.00
       2.223     0.825000       280546         5.71
       2.551     0.850000       289008         6.67
       3.239     0.875000       297495         8.00
       3.727     0.887500       301744         8.89
       4.295     0.900000       305998        10.00
       4.947     0.912500       310257        11.43
       5.683     0.925000       314509        13.33
       6.511     0.937500       318761        16.00
       6.971     0.943750       320876        17.78
       7.491     0.950000       323006        20.00
       8.075     0.956250       325123        22.86
       8.759     0.962500       327259        26.67
       9.527     0.968750       329370        32.00
       9.951     0.971875       330435        35.56
      10.423     0.975000       331503        40.00
      10.927     0.978125       332555        45.71
      11.519     0.981250       333617        53.33
      12.207     0.984375       334686        64.00
      12.639     0.985938       335215        71.11
      13.135     0.987500       335744        80.00
      13.751     0.989062       336283        91.43
      14.519     0.990625       336805       106.67
      15.487     0.992188       337337       128.00
      16.039     0.992969       337602       142.22
      16.687     0.993750       337871       160.00
      17.391     0.994531       338133       182.86
      18.239     0.995313       338401       213.33
      19.295     0.996094       338666       256.00
      19.951     0.996484       338799       284.44
      20.639     0.996875       338930       320.00
      21.375     0.997266       339062       365.71
      22.223     0.997656       339195       426.67
      23.247     0.998047       339328       512.00
      23.855     0.998242       339394       568.89
      24.639     0.998437       339461       640.00
      25.487     0.998633       339527       731.43
      26.607     0.998828       339593       853.33
      27.919     0.999023       339659      1024.00
      28.703     0.999121       339694      1137.78
      29.695     0.999219       339726      1280.00
      30.719     0.999316       339759      1462.86
      32.111     0.999414       339792      1706.67
      34.175     0.999512       339825      2048.00
      35.455     0.999561       339842      2275.56
      36.607     0.999609       339859      2560.00
      37.343     0.999658       339875      2925.71
      38.207     0.999707       339894      3413.33
      38.879     0.999756       339908      4096.00
      39.359     0.999780       339917      4551.11
      39.935     0.999805       339925      5120.00
      40.703     0.999829       339933      5851.43
      41.599     0.999854       339942      6826.67
      42.335     0.999878       339950      8192.00
      42.847     0.999890       339954      9102.22
      43.071     0.999902       339958     10240.00
      43.391     0.999915       339962     11702.86
      44.479     0.999927       339967     13653.33
      45.311     0.999939       339971     16384.00
      45.727     0.999945       339974     18204.44
      46.079     0.999951       339975     20480.00
      46.431     0.999957       339977     23405.71
      46.783     0.999963       339979     27306.67
      46.943     0.999969       339981     32768.00
      47.103     0.999973       339982     36408.89
      47.359     0.999976       339983     40960.00
      47.743     0.999979       339984     46811.43
      48.159     0.999982       339985     54613.33
      48.575     0.999985       339986     65536.00
      48.927     0.999986       339987     72817.78
      48.927     0.999988       339987     81920.00
      49.279     0.999989       339988     93622.86
      49.279     0.999991       339988    109226.67
      49.631     0.999992       339989    131072.00
      49.631     0.999993       339989    145635.56
      49.631     0.999994       339989    163840.00
      49.983     0.999995       339990    187245.71
      49.983     0.999995       339990    218453.33
      49.983     0.999996       339990    262144.00
      49.983     0.999997       339990    291271.11
      49.983     0.999997       339990    327680.00
      50.175     0.999997       339991    374491.43
      50.175     1.000000       339991          inf
#[Mean    =        2.012, StdDeviation   =        2.831]
#[Max     =       50.144, Total count    =       339991]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  359999 requests in 3.00m, 23.00MB read
Requests/sec:   2000.00
Transfer/sec:    130.86KB

```
Сводные результаты операций по запросам PUT демонстрируют дальнейшее увеличение задержки отклика. Так, длительность получения данных от сервера в серии с генерацией PUT-запросов превосходит итоговый показатель для GET-запросов более на 8 мс применительно к квантилю 99,99% и приблизительно на 10 мс – к квантилю 99,999%. Прирост средней величины задержки составил 0.3% при достижении идентичного отклонения. Можно предположить, что отмеченные различия определены как большими временными издержками на добавление новых записей в хранилище, так и необходимостью обновления значений для ключей, присутствующих в нём на момент выполнения связанной функции <em>upsert</em>.<br/>    
  
### 4) DELETE /v0/entity?id=<ID><br/>
  
Консольный вывод wrk<br/> 
```
max@max-Inspiron-15-3573:~/overload/2020-highload-dht$ wrk -t1 -c1 -d3m -s src/profiling/wrk_scripts/delete.lua -R2000 --latency http://localhost:8080
Running 3m test @ http://localhost:8080
  1 threads and 1 connections
  Thread calibration: mean lat.: 3.363ms, rate sampling interval: 17ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     4.20ms    8.27ms 120.70ms   94.49%
    Req/Sec     2.08k   643.75     6.12k    74.81%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.70ms
 75.000%    4.57ms
 90.000%    9.29ms
 99.000%   44.67ms
 99.900%   99.71ms
 99.990%  111.23ms
 99.999%  119.81ms
100.000%  120.77ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.082     0.000000            2         1.00
       0.526     0.100000        34065         1.11
       0.869     0.200000        68005         1.25
       1.092     0.300000       102043         1.43
       1.354     0.400000       136005         1.67
       1.702     0.500000       170076         2.00
       1.891     0.550000       187031         2.22
       2.223     0.600000       203993         2.50
       2.797     0.650000       221049         2.86
       3.573     0.700000       238003         3.33
       4.567     0.750000       254983         4.00
       5.143     0.775000       263512         4.44
       5.771     0.800000       272034         5.00
       6.463     0.825000       280515         5.71
       7.251     0.850000       289022         6.67
       8.163     0.875000       297488         8.00
       8.703     0.887500       301791         8.89
       9.287     0.900000       305975        10.00
       9.967     0.912500       310239        11.43
      10.767     0.925000       314484        13.33
      11.751     0.937500       318748        16.00
      12.359     0.943750       320863        17.78
      13.111     0.950000       322989        20.00
      14.119     0.956250       325099        22.86
      15.495     0.962500       327228        26.67
      17.343     0.968750       329352        32.00
      18.607     0.971875       330416        35.56
      20.143     0.975000       331474        40.00
      22.143     0.978125       332540        45.71
      24.671     0.981250       333600        53.33
      28.655     0.984375       334663        64.00
      31.471     0.985938       335192        71.11
      35.359     0.987500       335728        80.00
      40.479     0.989062       336256        91.43
      47.167     0.990625       336785       106.67
      53.727     0.992188       337317       128.00
      57.183     0.992969       337582       142.22
      60.607     0.993750       337849       160.00
      63.935     0.994531       338114       182.86
      67.519     0.995313       338382       213.33
      71.231     0.996094       338647       256.00
      73.151     0.996484       338780       284.44
      75.647     0.996875       338912       320.00
      79.167     0.997266       339046       365.71
      83.711     0.997656       339176       426.67
      87.487     0.998047       339311       512.00
      89.407     0.998242       339376       568.89
      91.519     0.998437       339443       640.00
      93.695     0.998633       339509       731.43
      96.447     0.998828       339574       853.33
     100.095     0.999023       339640      1024.00
     101.503     0.999121       339676      1137.78
     102.655     0.999219       339707      1280.00
     103.743     0.999316       339742      1462.86
     104.703     0.999414       339773      1706.67
     105.983     0.999512       339808      2048.00
     106.367     0.999561       339825      2275.56
     106.751     0.999609       339841      2560.00
     107.135     0.999658       339859      2925.71
     107.519     0.999707       339874      3413.33
     108.031     0.999756       339890      4096.00
     108.735     0.999780       339898      4551.11
     109.119     0.999805       339906      5120.00
     109.631     0.999829       339916      5851.43
     110.015     0.999854       339923      6826.67
     110.783     0.999878       339932      8192.00
     111.039     0.999890       339935      9102.22
     111.487     0.999902       339939     10240.00
     111.999     0.999915       339943     11702.86
     113.919     0.999927       339948     13653.33
     115.391     0.999939       339952     16384.00
     116.031     0.999945       339954     18204.44
     116.735     0.999951       339956     20480.00
     116.927     0.999957       339958     23405.71
     117.247     0.999963       339960     27306.67
     117.567     0.999969       339962     32768.00
     117.823     0.999973       339963     36408.89
     118.207     0.999976       339964     40960.00
     118.527     0.999979       339965     46811.43
     118.911     0.999982       339966     54613.33
     119.295     0.999985       339967     65536.00
     119.615     0.999986       339968     72817.78
     119.615     0.999988       339968     81920.00
     119.807     0.999989       339969     93622.86
     119.807     0.999991       339969    109226.67
     120.191     0.999992       339970    131072.00
     120.191     0.999993       339970    145635.56
     120.191     0.999994       339970    163840.00
     120.575     0.999995       339971    187245.71
     120.575     0.999995       339971    218453.33
     120.575     0.999996       339971    262144.00
     120.575     0.999997       339971    291271.11
     120.575     0.999997       339971    327680.00
     120.767     0.999997       339972    374491.43
     120.767     1.000000       339972          inf
#[Mean    =        4.202, StdDeviation   =        8.274]
#[Max     =      120.704, Total count    =       339972]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  359982 requests in 3.00m, 23.34MB read
Requests/sec:   1999.91
Transfer/sec:    132.81KB

```

Для запросов на удаление записей установлена максимальная оценка средней задержки, кратно (более чем в 2 раза) превышающая аналогичный показатель для запросов на добавление/обновление элементов хранилища (при близких к идентичным значениях стандартного отклонения). Предельное время отклика, применительно к релевантным квантилям, увеличилось на 69 мс как для 99,99%, так и для 99,999% операций обмена данными. Столь негативный эффект можно рассматривать как следствие интенсивного уменьшения объёма данных одновременно с динамической оптимизацией структуры хранилища под влиянием серийного исключения записей.  
